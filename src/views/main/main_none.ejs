<link rel="stylesheet" href="/static/css/login.css">

<div class="container" id="loginContainer">
	<div class="form-container sign-up-container">
		<form id="form_register">
			<h1>Create Account</h1>
			<!-- <div class="social-container">
				<a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
				<a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
				<a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
			</div>
			<span>or use your email for registration</span> -->
			<input type="text" class="input_login" placeholder="Nickname" name="nickname" required/>
			<input type="password" class="input_login" placeholder="Password" name="password" required/>
			<select name="gender" class="select_login" required>
				<option value="" style="color: #eee;">ì„±ë³„ ì„ íƒ</option>
				<option value="M">ë‚¨ì„±</option>
				<option value="F">ì—¬ì„±</option>
			</select>
			<button type="button" onclick="register();">Sign Up</button>
		</form>
	</div>
	<div class="form-container sign-in-container">
		<form id="form_login">
			<h1>Sign in</h1>
			<!-- <div class="social-container">
				<a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
				<a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
				<a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
			</div>
			<span>or use your account</span> -->
			<input type="type" class="input_login" placeholder="Nickname" name="nickname" required/>
			<input type="password" class="input_login" placeholder="Password" name="password" required onkeypress="if(window.event.keyCode==13) login();" />
			<!-- <a href="#">Forgot your password?</a> -->
			<button onclick="login();" type="button">Sign In</button>
		</form>
	</div>
	<div class="overlay-container">
		<div class="overlay">
			<div class="overlay-panel overlay-left">
				<h1>Welcome GoallectorğŸ’™</h1>
				<p>ëª©í‘œë¥¼ ìœ„í•´ ë‹¬ë ¤ë‚˜ê°€ëŠ” Goallectorì— <br>ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤.</p>
				<button class="ghost" id="signIn">Sign In</button>
			</div>
			<div class="overlay-panel overlay-right">
				<h1>Come On, GoallectorğŸ’›</h1>
				<p>Gollectorê³¼ í•¨ê»˜ <br>ëª©í‘œë¥¼ ë‹¬ì„±í•´ë´…ì‹œë‹¤ğŸ˜</p>
				<button class="ghost" id="signUp">Sign Up</button>
			</div>
		</div>
	</div>
</div>
<script>
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('loginContainer');

    signUpButton.addEventListener('click', () => {
        container.classList.add("right-panel-active");
    });

    signInButton.addEventListener('click', () => {
        container.classList.remove("right-panel-active");
    });

	function register(){
		var form = document.getElementById("form_register");
		if ( !form.checkValidity() ) {
			form.reportValidity();

			return false;
		}

		var data = {
			nickname: form.nickname.value,
			password: form.password.value,
			gender: form.gender.value
		}

		window.API.post(`${URL}/user/register`, data).then((result) => {
			if ( result.return ) {
				window.MSG.success("íšŒì›ê°€ì… ì„±ê³µ", `${result.user.nickname}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.`, () => {
					location.href="/";
				});
			} else window.MSG.error("íšŒì›ê°€ì… ì‹¤íŒ¨", result.msg);
		});
	}
	
	function login(){
		var form = document.getElementById("form_login");
		if ( !form.checkValidity() ) {
			form.reportValidity();

			return false;
		}
		var data = {
			nickname: form.nickname.value,
			password: form.password.value
		}

		window.API.post(`${URL}/user/login`, data).then((result) => {
			if ( result.return ) {
				window.MSG.success("ë¡œê·¸ì¸ ì„±ê³µ", `${result.user.nickname}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.`, ()=>{
					location.href="/";
				});
			} else {
				window.MSG.error("ë¡œê·¸ì¸ ì‹¤íŒ¨", result.msg);
				form.reset();
			}
		});
	}
</script>
